 –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
1. –°–ª–æ–π screens –¥—É–±–ª–∏—Ä—É–µ—Ç app –∏ –Ω–µ –∏–º–µ–µ—Ç —á–µ—Ç–∫–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
–°–µ–π—á–∞—Å screens ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –æ–±—ë—Ä—Ç–∫–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü, –Ω–µ –Ω–µ—Å—É—â–∏–µ –ª–æ–≥–∏–∫–∏.
–í —Ç–æ –∂–µ –≤—Ä–µ–º—è app —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ layout.tsx –∏ —Ä–æ—É—Ç–∏–Ω–≥.
–≠—Ç–æ —Ä–∞–∑–º—ã–≤–∞–µ—Ç –≥—Ä–∞–Ω–∏—Ü—É –º–µ–∂–¥—É —Ä–æ—É—Ç–∏–Ω–≥–æ–º –∏ –∫–æ–º–ø–æ–Ω–æ–≤–∫–æ–π.
‚úÖ –ü—Ä–∞–≤–∏–ª–æ FSD: pages/screens ‚Äî —ç—Ç–æ —Å–±–æ—Ä–∫–∞ –∏–∑ features/widgets/entities. –û–Ω –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫–∏, –Ω–æ –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–ª–æ–∏.

2. UI –≤ entities –∏ features –ø–µ—Ä–µ–ø–ª–µ—Ç—ë–Ω
TodoCard –∂–∏–≤—ë—Ç –≤ entities/todo/ui ‚Üí —ç—Ç–æ –æ—à–∏–±–∫–∞.
LoginForm –≤ features/auth/ui ‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω–æ.
‚úÖ –ü—Ä–∞–≤–∏–ª–æ:

entities ‚Äî —Ç–æ–ª—å–∫–æ —Ç–∏–ø—ã, —Å—Ö–µ–º—ã, API, —á–∏—Å—Ç—ã–µ —É—Ç–∏–ª–∏—Ç—ã. UI –∑–∞–ø—Ä–µ—â—ë–Ω.
features ‚Äî UI + –ª–æ–≥–∏–∫–∞, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è —Ñ–∏—á–∏ (–ª–æ–≥–∏–Ω, —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—É–¥—É).
widgets ‚Äî –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ –∏–∑ features/entities/shared, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä TodoList).
shared/ui ‚Äî –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Button, Card, Input).
3. RTK Query —Å–ª–∏—à–∫–æ–º –≥–ª—É–±–æ–∫–æ –≤—Å—Ç—Ä–æ–µ–Ω –≤ –¥–æ–º–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É
todoApi –∏–Ω–∂–µ–∫—Ç–∏—Ç—Å—è –ø—Ä—è–º–æ –≤ entities/todo/api.
–≠—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞ —Å–∞–º–∞ –ø–æ —Å–µ–±–µ, –Ω–æ:
–ù–µ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –Ω–∞–¥ useGetTodosQuery, useCreateTodoMutation ‚Üí –∑–∞–º–µ–Ω–∞ RTK Query = –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ.
–û–¥–Ω–∞–∫–æ, –ø–æ–ª–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è ‚Äî overengineering.
‚úÖ –†–µ—à–µ–Ω–∏–µ: –æ—Å—Ç–∞–≤–∏—Ç—å RTK Query –≤ entities, –Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ö—É–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—Ç –¥–µ—Ç–∞–ª–∏. –≠—Ç–æ –¥–∞—ë—Ç —Ç–æ—á–∫—É –∑–∞–º–µ–Ω—ã –±–µ–∑ —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è API.

4. –ù–µ—Ç —á—ë—Ç–∫–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è View / ViewModel
useTodos ‚Äî —ç—Ç–æ ViewModel (–ª–æ–≥–∏–∫–∞ + –¥–∞–Ω–Ω—ã–µ).
–ù–æ –æ–Ω –∂–∏–≤—ë—Ç –≤ features/todo/model, —á—Ç–æ –ª–æ–≥–∏—á–Ω–æ.
–ü—Ä–æ–±–ª–µ–º–∞: –≤ screens –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è AuthGuard, –∞ –Ω–µ SSR-–∑–∞—â–∏—Ç–∞, —á—Ç–æ –Ω–∞—Ä—É—à–∞–µ—Ç Next.js best practices.
‚úÖ –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å App Router groups + middleware + protected layout, –∞ AuthGuard ‚Äî —Ç–æ–ª—å–∫–æ –∫–∞–∫ fallback –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ.

5. Auth ‚Äî —Ä–∞—Å–ø—ã–ª—ë–Ω –ø–æ –≤—Å–µ–º—É –ø—Ä–æ–µ–∫—Ç—É
sessionStorage, useSessionCookie, AuthProvider ‚Äî —Ä–∞–∑–Ω—ã–µ –º–µ—Å—Ç–∞.
–ù–µ—Ç –µ–¥–∏–Ω–æ–π —Ç–æ—á–∫–∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ —Å–µ—Å—Å–∏—é.
‚úÖ –í—ã–Ω–µ—Å—Ç–∏ –≤ entities/session –∏–ª–∏ features/auth/lib/session-service.

üß± –ß—ë—Ç–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (–ø–æ FSD)
–°–ª–æ–π
–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
shared
–£—Ç–∏–ª–∏—Ç—ã, –∫–æ–Ω—Ñ–∏–≥–∏, —Ç–æ–∫–µ–Ω—ã, –∞—Ç–æ–º–∞—Ä–Ω—ã–µ UI, API-–±–∞–∑–∞ (baseApi)
entities
–¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ: —Ç–∏–ø—ã, Zod-—Å—Ö–µ–º—ã, RTK endpoints, —á–∏—Å—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏. –ë–µ–∑ React!
features
–§–∏—á–∞-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ + UI: —Ö—É–∫–∏, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Å–ª–∞–π—Å—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è
widgets
–ö–æ–º–ø–æ–∑–∏—Ü–∏–∏: TodoList = map(TodoCard) + —Ñ–∏–ª—å—Ç—Ä—ã + –¥–µ–π—Å—Ç–≤–∏—è
screens
–°–±–æ—Ä–∫–∞ —ç–∫—Ä–∞–Ω–∞: layout + widgets + features. –ë–µ–∑ –ª–æ–≥–∏–∫–∏, —Ç–æ–ª—å–∫–æ –∫–æ–º–ø–æ–∑–∏—Ü–∏—è
app
–†–æ—É—Ç–∏–Ω–≥, layout.tsx (–≥—Ä—É–ø–ø—ã), error.tsx, global-error.tsx
üó∫ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (App Router)
txt
123456789101112131415161718
‚úÖ Middleware –ø—Ä–æ–≤–µ—Ä—è–µ—Ç app_session_exists ‚Üí –µ—Å–ª–∏ false ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /login.

üõ† –ü–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
–®–∞–≥ 1. –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è App Router
–°–æ–∑–¥–∞—Ç—å app/(public), app/(protected).
–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ /login ‚Üí (public)/login/page.tsx.
–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ /todos, /profile, /settings ‚Üí (protected)/....
–í (protected)/layout.tsx:
–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (—á–µ—Ä–µ–∑ cookies().get('app_session') –∏–ª–∏ authService.isValidSession()).
–ï—Å–ª–∏ –Ω–µ—Ç —Å–µ—Å—Å–∏–∏ ‚Üí redirect('/login').
–ò–Ω–∞—á–µ ‚Äî —Ä–µ–Ω–¥–µ—Ä —Å Navbar.
Middleware –æ—Å—Ç–∞—ë—Ç—Å—è, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø–µ—Ä–≤—ã–π —Ñ–∏–ª—å—Ç—Ä.

–®–∞–≥ 2. –ß–∏—Å—Ç–∫–∞ entities –æ—Ç UI
–£–¥–∞–ª–∏—Ç—å src/entities/todo/ui, src/entities/user/ui.
–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ TodoCard ‚Üí src/features/todo/ui/todo-card.tsx.
–ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ UserCard ‚Üí src/features/user/ui/user-card.tsx (–∏–ª–∏ –≤ widgets –µ—Å–ª–∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è).
–¢–µ–ø–µ—Ä—å entities ‚Äî —á–∏—Å—Ç–æ data layer.

–®–∞–≥ 3. –£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ auth-—Å–ª–æ—è
–°–æ–∑–¥–∞—Ç—å src/lib/session/session-service.ts:
ts
12345678
–í useAuth, useSessionCookie, (protected)/layout.tsx ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å sessionService.
–î–æ–±–∞–≤–∏—Ç—å Zod-–≤–∞–ª–∏–¥–∞—Ü–∏—é –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏.
–®–∞–≥ 4. –£—Ç–æ—á–Ω–µ–Ω–∏–µ —Ä–æ–ª–µ–π screens –∏ widgets
screens/todos/ui/todos-page.tsx ‚Üí screens/todos/page.tsx.
–í–Ω—É—Ç—Ä–∏:
tsx
12345678
TodoList –æ—Å—Ç–∞—ë—Ç—Å—è –≤ widgets ‚Äî –æ–Ω –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø—Ä–æ—Ñ–∏–ª–µ –¥—Ä—É–≥–æ–≥–æ —é–∑–µ—Ä–∞).
–®–∞–≥ 5. –ò–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è RTK Query
–í entities/todo/index.ts —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ö—É–∫–∏:
ts
1
–í features/todo/model/use-todos.ts ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–∏ —Ö—É–∫–∏.
–ù–∏–∫—Ç–æ –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç todoApi.
–≠—Ç–æ –¥–∞—ë—Ç —Ç–æ—á–∫—É –∑–∞–º–µ–Ω—ã: –µ—Å–ª–∏ –∑–∞–≤—Ç—Ä–∞ –ø–µ—Ä–µ–π–¥—ë–º –Ω–∞ TanStack Query ‚Äî –º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ entities.

–®–∞–≥ 6. –£–ª—É—á—à–µ–Ω–∏–µ DX –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
next.config.ts: –≤–∫–ª—é—á–∏—Ç—å reactStrictMode, security headers.
tsconfig.json: –æ—Ç–∫–ª—é—á–∏—Ç—å allowJs, –¥–æ–±–∞–≤–∏—Ç—å baseUrl: "src".
ESLint: –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ no-relative-imports, fsd/layer-imports.
Type-safe –º–∞—Ä—à—Ä—É—Ç—ã (–ø–æ –º–Ω–µ–Ω–∏—é ‚Ññ3):
ts
12345
CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚Üí :root { --color-bg: ... } + –ø–æ–¥–¥–µ—Ä–∂–∫–∞ dark.
–®–∞–≥ 7. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ ¬´–ø—Å–µ–≤–¥–æ–º–µ—Ç–∞—Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É¬ª
–°–æ–∑–¥–∞—Ç—å shared/foundation ‚Äî —è–¥—Ä–æ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞–∫–µ—Ç:

shared/api
shared/config
shared/lib
shared/ui
shared/foundation/layout.tsx (base layout)
–ü—Ä–æ–µ–∫—Ç—ã –Ω–∞—Å–ª–µ–¥—É—é—Ç:

12345
–≠—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –¥–æ—Å—Ç–∏–∂–∏–º–æ, –µ—Å–ª–∏ —Å–µ–π—á–∞—Å –≤—ã—á–∏—Å—Ç–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–ü—Ä–æ–µ–∫—Ç —É–∂–µ –±–ª–∏–∑–æ–∫ –∫ production-ready —à–∞–±–ª–æ–Ω—É.
–ì–ª–∞–≤–Ω–æ–µ ‚Äî —É—Å—Ç—Ä–∞–Ω–∏—Ç—å ¬´—Å–µ—Ä—É—é –∑–æ–Ω—É¬ª –º–µ–∂–¥—É —Å–ª–æ—è–º–∏:

entities ‚Äî —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ,
features ‚Äî –ª–æ–≥–∏–∫–∞ + UI,
widgets ‚Äî –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏,
screens ‚Äî —Å–±–æ—Ä–∫–∞,
app ‚Äî —Ä–æ—É—Ç–∏–Ω–≥.
–ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:

–ù–æ–≤—ã–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–π–º—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∑–∞ 1 —á–∞—Å;
–ó–∞–º–µ–Ω–∞ RTK Query / Auth / UI ‚Äî –±–µ–∑ —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞;
–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–Ω–µ—Å—Ç–∏ shared –≤ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–∞–∫–µ—Ç;
–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SSR-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ App Router.

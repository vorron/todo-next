# Router System

üéØ **–ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Å –∏–¥–µ–∞–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π**

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
shared/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ router-config.ts    # üóÇÔ∏è  –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–ø—Ä–æ–µ–∫—Ç-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è)
‚îî‚îÄ‚îÄ lib/
    ‚îî‚îÄ‚îÄ router/
        ‚îú‚îÄ‚îÄ config-types.ts  # üìù –í—Å–µ TypeScript —Ç–∏–ø—ã
        ‚îú‚îÄ‚îÄ generators.ts    # ‚öôÔ∏è  –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ç–∏–ª–∏—Ç
        ‚îú‚îÄ‚îÄ config.ts        # üîÑ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (Router API)
        ‚îú‚îÄ‚îÄ utils.ts         # üõ†Ô∏è  –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã
        ‚îú‚îÄ‚îÄ guards.ts        # üõ°Ô∏è  Guards –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
        ‚îú‚îÄ‚îÄ validation.ts    # ‚úÖ Runtime –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
        ‚îú‚îÄ‚îÄ index.ts         # üì§ –ü—É–±–ª–∏—á–Ω—ã–π API
        ‚îî‚îÄ‚îÄ README.md        # üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã

### ‚úÖ Single Responsibility

- `router-config.ts` - —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–≤ shared/config)
- `generators.ts` - —Ç–æ–ª—å–∫–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Ç–∏–ª–∏—Ç
- `utils.ts` - —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –ª–æ–≥–∏–∫–∞
- `config-types.ts` - –≤—Å–µ —Ç–∏–ø—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

### ‚úÖ Separation of Concerns

- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Ç–¥–µ–ª–µ–Ω–∞ –æ—Ç –ª–æ–≥–∏–∫–∏
- –î–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ shared/config, –æ–±—â–∞—è –ª–æ–≥–∏–∫–∞ –≤ shared/lib
- UI –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π

### ‚úÖ FSD Architecture

- `shared/config` - –≥–ª–æ–±–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `shared/lib/router` - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Ä–æ—É—Ç–µ—Ä–∞
- –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–Ω—ã—Ö –∏ –æ–±—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üöÄ Usage

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import { routeConfig, paths, dynamicPaths } from '@/shared/lib/router';

// –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏
paths.home; // '/'
paths.todos; // '/todos'

// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏
dynamicPaths.todoDetail('123'); // '/todos/123'
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```typescript
import {
  mainNavigation,
  isProtectedPath,
  headerTemplates,
  validateRouteConfig,
} from '@/shared/lib/router';

// –§–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
const nav = mainNavigation.filter((item) => !item.hideWhenAuthenticated);

// Guards
if (isProtectedPath(path)) {
  // redirect to login
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
const validation = validateRouteConfig();
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞

```typescript
// –í shared/config/router-config.ts –¥–æ–±–∞–≤–∏—Ç—å:
newRoute: {
  path: '/new-route' as const,
  protected: true,
  metadata: { title: 'New Route' } satisfies Metadata,
  navigation: {
    label: 'New Route',
    order: 5,
    hideWhenAuthenticated?: boolean, // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  },
  header: {
    type: 'static' as const,
    descriptor: { title: 'New Route', breadcrumbs: [...] }
  },
} satisfies RouteConfig,
```

### –ü–æ—Ä—è–¥–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

- 0-9: –û—Å–Ω–æ–≤–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- 10-19: –í—Ç–æ—Ä–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- 20-29: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

## üé® Features

### ‚ú® –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

- `paths` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏
- `dynamicPaths` - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—É—Ç–∏
- `navigationConfig` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- `mainNavigation` - –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- `metadataConfig` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Å–µ—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- `protectedPatterns` - regex patterns –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

### üõ°Ô∏è Guards

- `isPublicPath()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- `isProtectedPath()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤
- `requiresAuth()` - –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

- Runtime –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ development
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—É—Ç–µ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–æ—Ä—è–¥–∫–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø—É—Ç–µ–π
- `clearValidationCache()` –¥–ª—è —Ç–µ—Å—Ç–æ–≤

### üéØ –¢–∏–ø–∏–∑–∞—Ü–∏—è

- –í—Å–µ —Ç–∏–ø—ã –≤ `config-types.ts`
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–∏–ø—ã –∏–∑ –¥–∞–Ω–Ω—ã—Ö
- `Strict*` —Ç–∏–ø—ã –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## üîÑ Migration Guide

### –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚Üí –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```bash
# –ë—ã–ª–æ:
src/shared/lib/router/data.ts
src/shared/lib/router/types.ts

# –°—Ç–∞–ª–æ:
src/shared/config/router-config.ts  # (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –∏–∑ data.ts)
src/shared/lib/router/config-types.ts  # (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–æ —Å types.ts)
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤

```typescript
// –°—Ç–∞—Ä—ã–µ –∏–º–ø–æ—Ä—Ç—ã –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ config.ts
import { routeConfig } from '@/shared/lib/router';

// –ù–æ–≤—ã–µ –∏–º–ø–æ—Ä—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
import { routeConfig } from '@/shared/lib/router/config';
```

## üìà Best Practices

1. **–ò–∑–º–µ–Ω—è–π—Ç–µ —Ç–æ–ª—å–∫–æ `shared/config/router-config.ts`** –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `order` —Å–≤–æ–π—Å—Ç–≤–æ** –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `hideWhenAuthenticated`** –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
4. **–°–ª–µ–¥—É–π—Ç–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞–º order** –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
5. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤ development** —Å –ø–æ–º–æ—â—å—é `validateConfigInDev()`
6. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏** –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üîç DX Improvements

- **–ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ**: –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ shared/config, –ª–æ–≥–∏–∫–∞ –≤ shared/lib
- **–ï–¥–∏–Ω—ã–π API**: –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ `config.ts`
- **–£–ª—É—á—à–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è**: –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ —Ç–æ—Ä–º–æ–∑–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è**: –≤—Å–µ —Ç–∏–ø—ã –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ

---

üéâ **–ò–¥–µ–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é!**
